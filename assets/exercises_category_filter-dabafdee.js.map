{"version":3,"file":"exercises_category_filter-dabafdee.js","sources":["../../src/js/exercises_category_filter.js"],"sourcesContent":["import { notify } from './notifier.js';\nimport { API_FILTER_POINT, api } from './api.js';\nimport Pagination from 'tui-pagination';\n\nexport { refs };\nconst refs = {\n  category: document.querySelector('.exercises-category-container'),\n  subcategory: document.querySelector('.exercises-subcategory-list'),\n  pagescategory: document.querySelector(\n    '.exercises-subcategory-page-container'\n  ),\n  title: document.querySelector('.exercises-title'),\n  search: document.querySelector('.exercices-form'),\n};\n\nconst loaderPagination = document.querySelector('.loader-pagination');\n// shows only once while page loading, after that will be overwrited\nconst loader = document.querySelector('.loader');\nloader.style.display = 'block';\n\nconst queryParams = {\n  filter: 'Muscles',\n  // maxPage: 0,\n  page: 1,\n  limit: 12,\n};\n\nconst pageWidth = window.innerWidth;\nif (pageWidth < 768) {\n  queryParams.limit = 8;\n}\n\nconst container = document.getElementById('tui-pagination-container');\nconst options = {\n  // totalItems: queryParams.maxPage,\n  itemsPerPage: queryParams.limit,\n  visiblePages: 3,\n  centerAlign: true,\n};\nconst instance = new Pagination(container, options);\n\ngetCategoryExercises();\n\nrefs.category.addEventListener('click', categorySearch);\n\nfunction categorySearch(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  [...refs.category.children].forEach(btn => {\n    if (btn.classList.contains('exercises-category-btn-active')) {\n      btn.classList.remove('exercises-category-btn-active');\n    }\n\n    btn.disabled = true;\n  });\n\n  event.target.classList.add('exercises-category-btn-active');\n\n  queryParams.filter = event.target.textContent;\n  queryParams.page = 1;\n\n  getCategoryExercises();\n}\n\nfunction markupCategory({ filter, name, imgUrl }) {\n  const backImg = `\n    linear-gradient(\n      0deg,\n      rgba(16, 16, 16, 0.7) 0%,\n      rgba(16, 16, 16, 0.7) 100%\n    ),\n    url('${imgUrl}')\n  `;\n\n  return `\n    <li class=\"exercises-subcategory-item\" data-url=\"${imgUrl}\" style=\"background-image: ${backImg}\">\n        <p class=\"exercises-subcategory-name\">${capitalizeFirstLetter(name)}</p>\n        <p class=\"exercises-subcategory-type\">${filter}</p>\n    </li>\n  `;\n}\n\nfunction capitalizeFirstLetter(name) {\n  if (name.charAt(0).toLowerCase() === name.charAt(0)) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n  } else {\n    return name;\n  }\n}\n\nfunction getCategoryExercises() {\n  api\n    .get(API_FILTER_POINT, queryParams)\n    .then(({ results, totalPages }) => {\n      if (refs.subcategory.classList.contains('open-card')) {\n        refs.subcategory.classList.remove('open-card');\n        refs.title.textContent = 'Exercises';\n        refs.search.classList.remove('is-visible');\n      }\n\n      refs.subcategory.innerHTML = results.map(markupCategory).join('');\n      // queryParams.maxPage = totalPages;\n\n      if (totalPages === 1) {\n        container.classList.add('is-hidden');\n      } else {\n        container.classList.remove('is-hidden');\n      }\n\n      instance.reset(totalPages * queryParams.limit);\n    })\n    .catch(error => notify.error(`API error: ${error}`))\n    .finally(() => {\n      [...refs.category.children].forEach(btn => {\n        btn.disabled = false;\n      });\n\n    });\n}\n\ninstance.on('afterMove', event => {\n  queryParams.page = event.page;\n  loaderPagination.style.display = 'block';\n  api\n    .get(API_FILTER_POINT, queryParams)\n    .then(({ results }) => {\n      refs.subcategory.innerHTML = results.map(markupCategory).join('');\n      loaderPagination.style.display = 'none';\n    })\n    .catch(error => notify.error(`API error: ${error}`))\n    .finally(() => {\n      loaderPagination.style.display = 'none';\n      refs.title.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n        inline: 'nearest',\n      });\n    });\n});"],"names":["refs","loaderPagination","loader","queryParams","pageWidth","container","options","instance","Pagination","getCategoryExercises","categorySearch","event","btn","markupCategory","filter","name","imgUrl","backImg","capitalizeFirstLetter","api","API_FILTER_POINT","results","totalPages","error","notify"],"mappings":"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"}