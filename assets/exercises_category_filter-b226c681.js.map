{"version":3,"file":"exercises_category_filter-b226c681.js","sources":["../../src/js/ApiPerformer.js","../../src/js/api.js","../../src/js/exercises_category_filter.js"],"sourcesContent":["import axios, { AxiosError } from \"axios\";\n\nexport class ApiPerformer {\n  #apiBaseUrl;\n\n  constructor(apiUrl) {\n    this.#apiBaseUrl = apiUrl;\n  }\n\n  get apiUrl() {\n    return this.#apiBaseUrl;\n  }\n\n  set apiUrl(value) {\n    this.#apiBaseUrl = value;\n  }\n\n  async get(reqPoint, params) {\n    try {\n      return await axios.get(this.#apiBaseUrl + reqPoint, { params })\n        .then(({ data }) => data);\n    } catch (error) {\n      throw new Error(error);\n    }\n  }\n\n  async post(reqPoint, params) {\n    try {\n      return await axios.post(this.#apiBaseUrl + reqPoint, { params })\n        .then(response => response);\n    } catch (error) {\n      throw new AxiosError(error);\n    }\n  }\n\n  async patch(reqPoint, params) {\n    try {\n      return await axios.patch(this.#apiBaseUrl + reqPoint, { params })\n        .then(response => response);\n    } catch (error) {\n      throw new AxiosError(error);\n    }\n  }\n\n}","import {ApiPerformer} from './ApiPerformer.js';\n\nexport const API_BASE_URL = \"https://energyflow.b.goit.study/api/\";\nexport const API_FILTER_POINT = \"filters\";\nexport const API_EXERCISES_POINT = \"exercises\";\nexport const API_SUBSCRIPTION_POINT = \"subscription\";\nexport const API_QUOTE_POINT = \"quote\";\n\nexport const api = new ApiPerformer(API_BASE_URL);","import { notify } from './notifier.js';\nimport { API_FILTER_POINT, api } from './api.js';\n\nconst refs = {\n  category: document.querySelector('.exercises-category-container'),\n  subcategory: document.querySelector('.exercises-subcategory-list'),\n  pagescategory: document.querySelector(\n    '.exercises-subcategory-page-container'\n  ),\n};\n\nconst queryParams = {\n  filter: 'Muscles',\n  maxPage: 0,\n  page: 1,\n  limit: 12,\n};\n\nconst pageWidth = window.innerWidth;\nif (pageWidth < 768) {\n  queryParams.limit = 8;\n}\n\ngetCategoryExercises();\n\nrefs.category.addEventListener('click', categorySearch);\n\nfunction categorySearch(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  [...refs.category.children].forEach(btn => {\n    if (btn.classList.contains('exercises-category-btn-active')) {\n      btn.classList.remove('exercises-category-btn-active');\n    }\n\n    btn.disabled = true;\n  });\n\n  event.target.classList.add('exercises-category-btn-active');\n\n  queryParams.filter = event.target.textContent;\n  queryParams.page = 1;\n\n  getCategoryExercises();\n}\n\nfunction markupCategory({ filter, name, imgUrl }) {\n  const backImg = `\n    linear-gradient(\n      0deg,\n      rgba(16, 16, 16, 0.7) 0%,\n      rgba(16, 16, 16, 0.7) 100%\n    ),\n    url('${imgUrl}')\n  `;\n\n  return `\n    <li class=\"exercises-subcategory-item\" data-url=\"${imgUrl}\" style=\"background-image: ${backImg}\">\n        <p class=\"exercises-subcategory-name\">${capitalizeFirstLetter(name)}</p>\n        <p class=\"exercises-subcategory-type\">${filter}</p>\n    </li>\n  `;\n}\n\nfunction capitalizeFirstLetter(name) {\n  if (name.charAt(0).toLowerCase() === name.charAt(0)) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n  } else {\n    return name;\n  }\n}\n\nfunction getCategoryExercises() {\n  api\n    .get(API_FILTER_POINT, queryParams)\n    .then(({ results, totalPages }) => {\n      refs.subcategory.innerHTML = results.map(markupCategory).join('');\n      queryParams.maxPage = totalPages;\n\n      if (queryParams.page === 1) {\n        markupPages();\n      }\n    })\n    .catch(error => notify('error', `API error: ${error}`))\n    .finally(() => {\n      [...refs.category.children].forEach(btn => {\n        btn.disabled = false;\n      });\n    });\n}\n\nfunction markupPages() {\n  if (queryParams.maxPage < 2) {\n    refs.pagescategory.innerHTML = '';\n    refs.pagescategory.classList.remove('is-visible');\n  } else if (queryParams.maxPage >= 2) {\n    let markupPage = `\n          <button type=\"button\" class=\"exercises-subcategory-page-btn exercises-subcategory-page-btn-active\">1</button>\n        `;\n    for (let i = 1; i < queryParams.maxPage; i++) {\n      markupPage += `\n        <button type=\"button\" class=\"exercises-subcategory-page-btn\">${\n          i + 1\n        }</button>\n      `;\n    }\n\n    refs.pagescategory.innerHTML = markupPage;\n\n    refs.pagescategory.classList.add('is-visible');\n\n    refs.pagescategory.addEventListener('click', categoryPages);\n  }\n}\n\nfunction categoryPages(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  [...event.currentTarget.children]\n    .find(btn =>\n      btn.classList.contains('exercises-subcategory-page-btn-active')\n    )\n    .classList.remove('exercises-subcategory-page-btn-active');\n\n  event.target.classList.add('exercises-subcategory-page-btn-active');\n\n  queryParams.page = event.target.textContent;\n\n  getCategoryExercises();\n}\n"],"names":["ApiPerformer","apiUrl","__privateAdd","_apiBaseUrl","__privateSet","__privateGet","value","reqPoint","params","axios","data","error","response","AxiosError","API_BASE_URL","API_FILTER_POINT","api","refs","queryParams","pageWidth","getCategoryExercises","categorySearch","event","btn","markupCategory","filter","name","imgUrl","backImg","capitalizeFirstLetter","results","totalPages","markupPages","notify","markupPage","i","categoryPages"],"mappings":"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"}