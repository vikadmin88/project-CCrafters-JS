{"version":3,"file":"exercises_category_filter-8ac5984d.js","sources":["../../src/js/exercises_category_filter.js"],"sourcesContent":["import { notify } from './notifier.js';\nimport { API_FILTER_POINT, api } from './api.js';\n\nexport { refs };\nconst refs = {\n  category: document.querySelector('.exercises-category-container'),\n  subcategory: document.querySelector('.exercises-subcategory-list'),\n  pagescategory: document.querySelector(\n    '.exercises-subcategory-page-container'\n  ),\n  title: document.querySelector('.exercises-title'),\n  search: document.querySelector('.exercices-form'),\n};\n\nconst queryParams = {\n  filter: 'Muscles',\n  maxPage: 0,\n  page: 1,\n  limit: 12,\n};\n\nconst pageWidth = window.innerWidth;\nif (pageWidth < 768) {\n  queryParams.limit = 8;\n}\n\ngetCategoryExercises();\n\nrefs.category.addEventListener('click', categorySearch);\n\nfunction categorySearch(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  [...refs.category.children].forEach(btn => {\n    if (btn.classList.contains('exercises-category-btn-active')) {\n      btn.classList.remove('exercises-category-btn-active');\n    }\n\n    btn.disabled = true;\n  });\n\n  event.target.classList.add('exercises-category-btn-active');\n\n  queryParams.filter = event.target.textContent;\n  queryParams.page = 1;\n\n  getCategoryExercises();\n}\n\nfunction markupCategory({ filter, name, imgUrl }) {\n  const backImg = `\n    linear-gradient(\n      0deg,\n      rgba(16, 16, 16, 0.7) 0%,\n      rgba(16, 16, 16, 0.7) 100%\n    ),\n    url('${imgUrl}')\n  `;\n\n  return `\n    <li class=\"exercises-subcategory-item\" data-url=\"${imgUrl}\" style=\"background-image: ${backImg}\">\n        <p class=\"exercises-subcategory-name\">${capitalizeFirstLetter(name)}</p>\n        <p class=\"exercises-subcategory-type\">${filter}</p>\n    </li>\n  `;\n}\n\nfunction capitalizeFirstLetter(name) {\n  if (name.charAt(0).toLowerCase() === name.charAt(0)) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n  } else {\n    return name;\n  }\n}\n\nfunction getCategoryExercises() {\n  api\n    .get(API_FILTER_POINT, queryParams)\n    .then(({ results, totalPages }) => {\n      if (refs.subcategory.classList.contains('open-card')) {\n        refs.subcategory.classList.remove('open-card');\n        refs.title.textContent = 'Exercises';\n        refs.search.classList.remove('is-visible');\n      }\n\n      refs.subcategory.innerHTML = results.map(markupCategory).join('');\n      queryParams.maxPage = totalPages;\n\n      if (queryParams.page === 1) {\n        markupPages();\n      }\n    })\n    .catch(error => notify('error', `API error: ${error}`))\n    .finally(() => {\n      [...refs.category.children].forEach(btn => {\n        btn.disabled = false;\n      });\n    });\n}\n\nfunction markupPages() {\n  if (queryParams.maxPage < 2) {\n    refs.pagescategory.innerHTML = '';\n    refs.pagescategory.classList.remove('is-visible');\n  } else if (queryParams.maxPage >= 2) {\n    let markupPage = `\n          <button type=\"button\" class=\"exercises-subcategory-page-btn exercises-subcategory-page-btn-active\">1</button>\n        `;\n    for (let i = 1; i < queryParams.maxPage; i++) {\n      markupPage += `\n        <button type=\"button\" class=\"exercises-subcategory-page-btn\">${\n          i + 1\n        }</button>\n      `;\n    }\n\n    refs.pagescategory.innerHTML = markupPage;\n\n    refs.pagescategory.classList.add('is-visible');\n\n    refs.pagescategory.addEventListener('click', categoryPages);\n  }\n}\n\nfunction categoryPages(event) {\n  if (event.target.nodeName !== 'BUTTON') {\n    return;\n  }\n\n  [...event.currentTarget.children]\n    .find(btn =>\n      btn.classList.contains('exercises-subcategory-page-btn-active')\n    )\n    .classList.remove('exercises-subcategory-page-btn-active');\n\n  event.target.classList.add('exercises-subcategory-page-btn-active');\n\n  queryParams.page = event.target.textContent;\n\n  getCategoryExercises();\n}\n"],"names":["refs","queryParams","pageWidth","getCategoryExercises","categorySearch","event","btn","markupCategory","filter","name","imgUrl","backImg","capitalizeFirstLetter","api","API_FILTER_POINT","results","totalPages","markupPages","error","notify","markupPage","i","categoryPages"],"mappings":"4FAIK,MAACA,EAAO,CACX,SAAU,SAAS,cAAc,+BAA+B,EAChE,YAAa,SAAS,cAAc,6BAA6B,EACjE,cAAe,SAAS,cACtB,uCACD,EACD,MAAO,SAAS,cAAc,kBAAkB,EAChD,OAAQ,SAAS,cAAc,iBAAiB,CAClD,EAEMC,EAAc,CAClB,OAAQ,UACR,QAAS,EACT,KAAM,EACN,MAAO,EACT,EAEMC,EAAY,OAAO,WACrBA,EAAY,MACdD,EAAY,MAAQ,GAGtBE,IAEAH,EAAK,SAAS,iBAAiB,QAASI,CAAc,EAEtD,SAASA,EAAeC,EAAO,CACzBA,EAAM,OAAO,WAAa,WAI9B,CAAC,GAAGL,EAAK,SAAS,QAAQ,EAAE,QAAQM,GAAO,CACrCA,EAAI,UAAU,SAAS,+BAA+B,GACxDA,EAAI,UAAU,OAAO,+BAA+B,EAGtDA,EAAI,SAAW,EACnB,CAAG,EAEDD,EAAM,OAAO,UAAU,IAAI,+BAA+B,EAE1DJ,EAAY,OAASI,EAAM,OAAO,YAClCJ,EAAY,KAAO,EAEnBE,IACF,CAEA,SAASI,EAAe,CAAE,OAAAC,EAAQ,KAAAC,EAAM,OAAAC,CAAM,EAAI,CAChD,MAAMC,EAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAMPD,CAAM;AAAA,IAGf,MAAO;AAAA,uDAC8CA,CAAM,8BAA8BC,CAAO;AAAA,gDAClDC,EAAsBH,CAAI,CAAC;AAAA,gDAC3BD,CAAM;AAAA;AAAA,GAGtD,CAEA,SAASI,EAAsBH,EAAM,CACnC,OAAIA,EAAK,OAAO,CAAC,EAAE,YAAW,IAAOA,EAAK,OAAO,CAAC,EACzCA,EAAK,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAK,MAAM,CAAC,EAE3CA,CAEX,CAEA,SAASN,GAAuB,CAC9BU,EACG,IAAIC,EAAkBb,CAAW,EACjC,KAAK,CAAC,CAAE,QAAAc,EAAS,WAAAC,KAAiB,CAC7BhB,EAAK,YAAY,UAAU,SAAS,WAAW,IACjDA,EAAK,YAAY,UAAU,OAAO,WAAW,EAC7CA,EAAK,MAAM,YAAc,YACzBA,EAAK,OAAO,UAAU,OAAO,YAAY,GAG3CA,EAAK,YAAY,UAAYe,EAAQ,IAAIR,CAAc,EAAE,KAAK,EAAE,EAChEN,EAAY,QAAUe,EAElBf,EAAY,OAAS,GACvBgB,GAER,CAAK,EACA,MAAMC,GAASC,EAAO,QAAS,cAAcD,CAAK,EAAE,CAAC,EACrD,QAAQ,IAAM,CACb,CAAC,GAAGlB,EAAK,SAAS,QAAQ,EAAE,QAAQM,GAAO,CACzCA,EAAI,SAAW,EACvB,CAAO,CACP,CAAK,CACL,CAEA,SAASW,GAAc,CACrB,GAAIhB,EAAY,QAAU,EACxBD,EAAK,cAAc,UAAY,GAC/BA,EAAK,cAAc,UAAU,OAAO,YAAY,UACvCC,EAAY,SAAW,EAAG,CACnC,IAAImB,EAAa;AAAA;AAAA,UAGjB,QAASC,EAAI,EAAGA,EAAIpB,EAAY,QAASoB,IACvCD,GAAc;AAAA,uEAEVC,EAAI,CACL;AAAA,QAILrB,EAAK,cAAc,UAAYoB,EAE/BpB,EAAK,cAAc,UAAU,IAAI,YAAY,EAE7CA,EAAK,cAAc,iBAAiB,QAASsB,CAAa,CAC3D,CACH,CAEA,SAASA,EAAcjB,EAAO,CACxBA,EAAM,OAAO,WAAa,WAI9B,CAAC,GAAGA,EAAM,cAAc,QAAQ,EAC7B,KAAKC,GACJA,EAAI,UAAU,SAAS,uCAAuC,CAC/D,EACA,UAAU,OAAO,uCAAuC,EAE3DD,EAAM,OAAO,UAAU,IAAI,uCAAuC,EAElEJ,EAAY,KAAOI,EAAM,OAAO,YAEhCF,IACF"}