{"version":3,"file":"exercises_items-4fd65eda.js","sources":["../../src/js/exercises_items.js"],"sourcesContent":["import { API_EXERCISES_POINT, api } from './api.js';\nimport { refs } from './exercises_category_filter.js';\nimport Pagination from 'tui-pagination';\n\nconst paramsCard = {\n  bodypart: '',\n  muscles: '',\n  equipment: '',\n  keyword: '',\n  page: 1,\n  limit: 8,\n};\n\nconst container = document.getElementById('tui-pagination-container');\n\nconst options = {\n  itemsPerPage: 8,\n  visiblePages: 3,\n  centerAlign: true,\n};\nconst instance = new Pagination(container, options);\n\nlet category = '';\n\nrefs.subcategory.addEventListener('click', searchCard);\nrefs.search.addEventListener('submit', searchCardForm);\n\nfunction searchCardForm(e) {\n  e.preventDefault();\n  const form = e.target;\n  paramsCard.keyword = form.elements.searchstr.value.trim().toLowerCase();\n\n  console.log(paramsCard);\n  form.reset();\n  getSubcategoryExercises(paramsCard);\n}\n\nfunction searchCard(e) {\n  e.preventDefault();\n\n  if (\n    !e.target.classList.contains('exercises-subcategory-item') &&\n    !e.target.parentNode.classList.contains('exercises-subcategory-item')\n  ) {\n    return;\n  }\n\n  refs.search.classList.add('is-visible');\n  const liEl = e.target.closest('.exercises-subcategory-item');\n\n  category = liEl.children[1].textContent.toLowerCase();\n  const subcategoryName = liEl.children[0].textContent;\n\n  paramsCard.page = 1;\n\n  refs.title.insertAdjacentHTML(\n    'beforeend',\n    ` / <span class=\"exercises-title-span\"> ${subcategoryName}</span>`\n  );\n\n  refs.subcategory.classList.add('open-card');\n  checkCategory(category, liEl);\n}\n\nfunction checkCategory(check, liEl) {\n  paramsCard.muscles = '';\n  paramsCard.bodypart = '';\n  paramsCard.equipment = '';\n  paramsCard.keyword = '';\n\n  if (check === 'muscles') {\n    paramsCard.muscles = liEl.children[0].textContent.toLowerCase();\n    getSubcategoryExercises();\n  } else if (check === 'body parts') {\n    paramsCard.bodypart = liEl.children[0].textContent.toLowerCase();\n    getSubcategoryExercises();\n  } else if (check === 'equipment') {\n    paramsCard.equipment = liEl.children[0].textContent.toLowerCase();\n    getSubcategoryExercises();\n  }\n}\n\nfunction createMarkupCard(results) {\n  const arr = results\n    .map(\n      ({\n        _id,\n        bodyPart,\n        name,\n        rating,\n        burnedCalories,\n        target,\n      }) => `<li class=\"exercices-card\">\n\n          <div class=\"card-header\">\n            <div class=\"card-header-container\">\n              <p class=\"card-category\">WORKOUT</p>\n\n               <div class=\"card-rating-container\">\n                  <p class=\"card-rating\">\n                     ${rating}\n                  </p>\n                 <svg class=\"card-rating-svg\" width=\"15\" height=\"15\">\n                   <use href=\"/project-CCrafters-JS/assets/icons-84da4e8c.svg#icon-star\"></use>\n                 </svg>\n               </div>\n\n            </div>\n\n                 <button class=\"card-button\" type=\"submit\" data-id = \"${_id}\">\n              Start\n              <svg class=\"card-search-svg\" >\n                <use href=\"/project-CCrafters-JS/assets/icons-84da4e8c.svg#icon-arrow-right\"></use>\n              </svg>\n            </button >\n\n          </div>\n\n          <div class=\"card-bodi\">\n            <svg class=\"card-bodi-svg\" width=\"24\" height=\"24\">\n              <use href=\"/project-CCrafters-JS/assets/icons-84da4e8c.svg#icon-running_man\"></use>\n            </svg>\n            <h3 class=\"card-name\">${capitalizeFirstLetter(name)}</h3>\n          </div>\n\n            <ul class=\"card-inform-list\">\n              <li class=\"card-inform-item\">Burned calories:  <span class=\"card-inform-item-span\">${burnedCalories} / 3 min</span></li>\n              <li class=\"card-inform-item\">Body part: <span class=\"card-inform-item-span\">${bodyPart}</span></li>\n              <li class=\"card-inform-item\">Target: <span class=\"card-inform-item-span\">${target}</span></li>\n            </ul>\n\n        </li>`\n    )\n    .join('');\n\n  refs.subcategory.innerHTML = arr;\n}\n\nfunction getSubcategoryExercises() {\n  const pageWidth = window.innerWidth;\n  if (pageWidth >= 1440) {\n    paramsCard.limit = 9;\n  }\n\n  api\n    .get(API_EXERCISES_POINT, paramsCard)\n    .then(({ page, totalPages, results }) => {\n      createMarkupCard(results);\n      if (results.length === 0) {\n        refs.subcategory.innerHTML = `<li class = \"exercises-text\"><p>Unfortunately, <span class = \"exercises-text-span\">no results</span> were found. You may want to consider other search options to find the exercise you are looking for. Our range is wide and you have the opportunity to find more options that suit your needs.</p></li>`;\n      }\n\n      instance.reset(totalPages * 8);\n\n      if (totalPages <= 1) {\n        container.classList.add('is-hidden');\n      } else {\n        container.classList.remove('is-hidden');\n      }\n    })\n    .catch(error => console.log(error)).finally;\n  instance.on('afterMove', event => {\n    const currentPage = event.page;\n    paramsCard.page = currentPage;\n    api\n      .get(API_EXERCISES_POINT, paramsCard)\n      .then(({ results }) => {\n        createMarkupCard(results);\n      })\n      .catch(error => console.log(error));\n  });\n}\n\nfunction capitalizeFirstLetter(name) {\n  if (name.charAt(0).toLowerCase() === name.charAt(0)) {\n    return name.charAt(0).toUpperCase() + name.slice(1);\n  } else {\n    return name;\n  }\n}\n"],"names":["paramsCard","container","options","instance","Pagination","category","refs","searchCard","searchCardForm","form","getSubcategoryExercises","liEl","subcategoryName","checkCategory","check","createMarkupCard","results","arr","_id","bodyPart","name","rating","burnedCalories","target","capitalizeFirstLetter","api","API_EXERCISES_POINT","page","totalPages","error","event","currentPage"],"mappings":"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"}