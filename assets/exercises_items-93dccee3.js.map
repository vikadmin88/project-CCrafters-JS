{"version":3,"file":"exercises_items-93dccee3.js","sources":["../../src/js/exercises_items.js"],"sourcesContent":["import { API_EXERCISES_POINT, api } from './api.js';\nimport { refs } from './exercises_category_filter.js';\nimport Pagination from 'tui-pagination';\n\nconst paramsCard = {\n  bodypart: '',\n  muscles: '',\n  equipment: '',\n  keyword: '',\n  page: 1,\n  limit: 8,\n};\n\nconst container = document.getElementById('tui-pagination-container');\n\nconst options = {\n  itemsPerPage: 8,\n  visiblePages: 3,\n  centerAlign: true,\n};\nconst instance = new Pagination(container, options);\n\nlet category = '';\n\nrefs.subcategory.addEventListener('click', searchCard);\nrefs.search.addEventListener('submit', searchCardForm);\n\nfunction searchCardForm(e) {\n  e.preventDefault();\n  const form = e.target;\n  paramsCard.keyword = form.elements.searchstr.value.trim().toLowerCase();\n\n  console.log(paramsCard);\n  form.reset();\n  getSubcategoryExercises(paramsCard);\n}\n\nfunction searchCard(e) {\n  e.preventDefault();\n  // if (e.target === e.currentTarget) {\n  //   return;\n  // }\n  if (\n    !e.target.classList.contains('exercises-subcategory-item') ||\n    !e.target.closest('.exercises-subcategory-item')\n  ) {\n    return;\n  }\n\n  refs.search.classList.add('is-visible');\n  const liEl = e.target.closest('.exercises-subcategory-item');\n\n  category = liEl.children[1].textContent.toLowerCase();\n  const subcategoryName = liEl.children[0].textContent;\n\n  refs.title.insertAdjacentHTML(\n    'beforeend',\n    ` / <span class=\"exercises-title-span\"> ${subcategoryName}</span>`\n  );\n\n  refs.subcategory.classList.add('open-card');\n  checkCategory(category, liEl);\n}\n\nfunction checkCategory(check, liEl) {\n  paramsCard.muscles = '';\n  paramsCard.bodypart = '';\n  paramsCard.equipment = '';\n  paramsCard.keyword = '';\n\n  if (check === 'muscles') {\n    paramsCard.muscles = liEl.children[0].textContent.toLowerCase();\n    getSubcategoryExercises();\n  } else if (check === 'body parts') {\n    paramsCard.bodypart = liEl.children[0].textContent.toLowerCase();\n    getSubcategoryExercises();\n  } else if (check === 'equipment') {\n    paramsCard.equipment = liEl.children[0].textContent.toLowerCase();\n    getSubcategoryExercises();\n  }\n}\n\nfunction createMarkupCard(results) {\n  const arr = results\n    .map(\n      ({\n        _id,\n        bodyPart,\n        name,\n        rating,\n        burnedCalories,\n        target,\n      }) => `<li class=\"exercices-card\">\n\n          <div class=\"card-header\">\n            <div class=\"card-header-container\">\n              <p class=\"card-category\">WORKOUT</p>\n\n               <div class=\"card-rating-container\">\n                  <p class=\"card-rating\">\n                     ${rating}\n                  </p>\n                 <svg class=\"card-rating-svg\" width=\"15\" height=\"15\">\n                   <use href=\"./img/icons.svg#icon-star\"></use>\n                 </svg>\n               </div>\n               \n            </div>\n\n                 <button class=\"card-button\" type=\"submit\" data-id = \"${_id}\">\n              Start\n              <svg class=\"card-search-svg\" >\n                <use href=\"./img/icons.svg#icon-arrow-right\"></use>\n              </svg>\n            </button >\n           \n          </div>\n\n          <div class=\"card-bodi\">\n            <svg class=\"card-bodi-svg\" width=\"24\" height=\"24\">\n              <use href=\"./img/icons.svg#icon-running_man\"></use>\n            </svg>\n            <h3 class=\"card-name\">${name}</h3>\n          </div>\n\n            <ul class=\"card-inform-list\">\n              <li class=\"card-inform-item\">Burned calories:  <span class=\"card-inform-item-span\">${burnedCalories} / 3 min</span></li>\n              <li class=\"card-inform-item\">Body part: <span class=\"card-inform-item-span\">${bodyPart}</span></li>\n              <li class=\"card-inform-item\">Target: <span class=\"card-inform-item-span\">${target}</span></li>\n            </ul>\n          \n        </li>`\n    )\n    .join('');\n\n  refs.subcategory.innerHTML = arr;\n}\n\nfunction getSubcategoryExercises() {\n  const pageWidth = window.innerWidth;\n  if (pageWidth >= 1440) {\n    paramsCard.limit = 9;\n  }\n\n  api\n    .get(API_EXERCISES_POINT, paramsCard)\n    .then(({ page, totalPages, results }) => {\n      createMarkupCard(results);\n      if (results.length === 0) {\n        refs.subcategory.innerHTML = `<li class = \"exercises-text\"><p>Unfortunately, <span class = \"exercises-text-span\">no results</span> were found. You may want to consider other search options to find the exercise you are looking for. Our range is wide and you have the opportunity to find more options that suit your needs.</p></li>`;\n      }\n\n      instance.reset(totalPages * 8);\n    })\n    .catch(error => console.log(error)).finally;\n  instance.on('afterMove', event => {\n    const currentPage = event.page;\n    paramsCard.page = currentPage;\n    api\n      .get(API_EXERCISES_POINT, paramsCard)\n      .then(({ results }) => {\n        createMarkupCard(results);\n      })\n      .catch(error => console.log(error));\n  });\n}\n"],"names":["paramsCard","container","options","instance","Pagination","category","refs","searchCard","searchCardForm","e","form","getSubcategoryExercises","liEl","subcategoryName","checkCategory","check","createMarkupCard","results","arr","_id","bodyPart","name","rating","burnedCalories","target","api","API_EXERCISES_POINT","page","totalPages","error","event","currentPage"],"mappings":"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"}